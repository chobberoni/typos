let pluralize,getDuration,progressBar;_34e‍.x([["initial",()=>initial],["stats",()=>stats],["pending",()=>pending],["buildPassed",()=>buildPassed],["buildComplete",()=>buildComplete],["buildFailed",()=>buildFailed],["buildError",()=>buildError],["skipped",()=>skipped]]);_34e‍.w("pluralize",[["default",["pluralize"],function(v){pluralize=v}]]);_34e‍.w("../../lib/tasks",[["getDuration",["getDuration"],function(v){getDuration=v}]]);_34e‍.w("../../lib/utils",[["progress",["progressBar"],function(v){progressBar=v}]]);




       const initial = {
  status: 'initial',
  title: 'Take snapshots of your stories',
};

       const stats = ctx => ({
  errors: pluralize('error', ctx.build.errorCount, true),
  changes: pluralize('change', ctx.build.changeCount, true),
  snapshots: pluralize('snapshot', ctx.build.snapshotCount, true),
  components: pluralize('component', ctx.build.componentCount, true),
  specs: pluralize('story', ctx.build.specCount, true),
});

       const pending = ctx => {
  const { build, options, cursor = 0, label = '' } = ctx;
  const { errors, snapshots, components, specs } = stats(ctx);
  const only = options.only ? ` for stories matching '${options.only}'` : '';
  const percentage = Math.round((cursor / build.snapshotCount) * 100);
  const counts = `${cursor}/${build.snapshotCount}`;
  const errs = build.errorCount ? `(${errors}) ` : '';
  return {
    status: 'pending',
    title: `Taking ${snapshots} (${components}, ${specs})${only}`,
    output: cursor
      ? `[${progressBar(percentage)}] ${counts} ${errs} ${label}`
      : 'This may take a few minutes',
  };
};

       const buildPassed = ctx => {
  const { snapshots, components, specs } = stats(ctx);
  return {
    status: 'success',
    title: `Build ${ctx.build.number} passed!`,
    output: `Took ${snapshots} (${components}, ${specs}) in ${getDuration(ctx)}; no changes found`,
  };
};

       const buildComplete = ctx => {
  const { changes, snapshots, components, specs } = stats(ctx);
  return {
    status: 'success',
    title: `Build ${ctx.build.number} completed in ${getDuration(ctx)}`,
    output: ctx.build.autoAcceptChanges
      ? `Auto-accepted ${changes} (${snapshots}, ${components}, ${specs})`
      : `Found ${changes} (${components}, ${specs}, ${snapshots}); exiting with status code ${ctx.exitCode}`,
  };
};

       const buildFailed = ctx => {
  const { errors, snapshots, components, specs } = stats(ctx);
  return {
    status: 'error',
    title: `Build ${ctx.build.number} failed after ${getDuration(ctx)}`,
    output: `Found ${errors} (${components}, ${specs}, ${snapshots}); exiting with status code ${ctx.exitCode}`,
  };
};

       const buildError = ctx => {
  return {
    status: 'error',
    title: `Oops. Build ${ctx.build.number} failed to run. Please try again.`,
    output: `Exiting with status code ${ctx.exitCode}`,
  };
};

       const skipped = ctx => {
  return {
    status: 'skipped',
    title: 'Take snapshots of your stories',
    output: ctx.isPublishOnly
      ? `No UI tests or UI review enabled`
      : `Skipped due to ${ctx.options.list ? '--list' : '--exit-once-uploaded'}`,
  };
};
